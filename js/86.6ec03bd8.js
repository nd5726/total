"use strict";(self["webpackChunktotal"]=self["webpackChunktotal"]||[]).push([[86],{486:function(t,e,l){l.d(e,{Z:function(){return w}});var a=l(3396),o=l(7139),s=l(9242);const i={"aria-hidden":"true",class:"flex overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-50 justify-center items-center h-modal md:h-full md:inset-0 bg-white bg-opacity-60"},r={class:"relative w-1/3 bg-white rounded-lg shadow-xl"},d={class:"flex justify-between items-start px-8 py-4 rounded-t bg-red-700 border-b border-gray-600"},n=(0,a._)("h3",{class:"text-lg font-semibold lg:text-2xl text-white"},"確認刪除",-1),c=(0,a._)("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),p=[c],u={class:"p-6 flex"},h={class:"text-gray-700 font-bold"},g={class:"flex justify-end items-center px-8 py-4 space-x-2 rounded-b border-t border-gray-600"};function m(t,e,l,c,m,x){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",r,[(0,a._)("div",d,[n,(0,a._)("button",{type:"button",onClick:e[0]||(e[0]=t=>m.showDeleteModal=!1),class:"text-gray-200 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center","data-modal-toggle":"defaultModal"},p)]),(0,a._)("div",u,[(0,a._)("p",h,"是否刪除 "+(0,o.zw)(l.item.title)+" ? (刪除後無法回覆)",1)]),(0,a._)("div",g,[(0,a._)("button",{"data-modal-toggle":"defaultModal",type:"button",onClick:e[1]||(e[1]=t=>m.showDeleteModal=!1),class:"bg-gray-500 text-white focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-base font-bold px-8 py-2.5 focus:z-10 hover:bg-gray-600"},"取消"),(0,a._)("button",{"data-modal-toggle":"defaultModal",type:"button",onClick:e[2]||(e[2]=(...t)=>x.deleteItem&&x.deleteItem(...t)),class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-bold rounded-lg text-base px-8 py-2.5 text-center"},"確認刪除")])])],512)),[[s.F8,m.showDeleteModal]])}var x={data(){return{temp:{},showDeleteModal:!1}},props:["item"],methods:{deleteItem(){this.$emit("delete-item")}}},b=l(89);const f=(0,b.Z)(x,[["render",m]]);var w=f},5086:function(t,e,l){l.r(e),l.d(e,{default:function(){return ct}});var a=l(3396),o=l(7139);const s={class:"container mx-auto shrink px-4"},i={class:"flex items-center justify-between mb-4"},r=(0,a._)("h2",{class:"border-l-8 border-brown-dark text-2xl font-bold text-brown-dark leading-none tracking-wider pl-4"},"問與答管理",-1),d={class:"w-full"},n=(0,a._)("tr",{class:"text-base bg-brown-light text-white"},[(0,a._)("th",{class:"w-6/12 flex-shrink-0 py-3 px-4 text-left"},[(0,a._)("p",null,"標題")]),(0,a._)("th",{class:"w-2/12 flex-shrink-0 py-3 px-4 text-left"},[(0,a._)("p",null,"建立時間")]),(0,a._)("th",{class:"w-1/12 py-3 px-4"},[(0,a._)("p",null,"是否啟用")]),(0,a._)("th",{class:"w-3/12 py-3 px-4"},[(0,a._)("p",null,"動作")])],-1),c={class:"w-6/12 py-3 px-4 text-left"},p={class:"w-2/12 py-3 px-4 text-left"},u={class:"w-1/12 py-3 px-4"},h={key:0},g=(0,a._)("span",{class:"text-green-600"},"啟用",-1),m=[g],x={key:1},b=(0,a._)("span",{class:"text-black"},"未啟用",-1),f=[b],w={class:"w-3/12 py-3 px-4"},y=["onClick"],_=["onClick"],v={class:"font-bold text-slate-500 my-4 text-right tracking-wider"};function M(t,e,l,g,b,M){const k=(0,a.up)("VLoading"),A=(0,a.up)("QuestionModal"),L=(0,a.up)("DeleteModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",s,[(0,a._)("div",i,[r,(0,a._)("button",{class:"block text-white text-lg font-bold bg-brown-light hover:bg-brown-dark focus:ring-4 focus:ring-slate-300 rounded-lg px-8 py-2 text-center",type:"button","data-modal-toggle":"defaultModal",onClick:e[0]||(e[0]=e=>M.openFormModal("new",t.item))},"新增產品")]),(0,a._)("table",d,[(0,a._)("tbody",null,[n,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(b.articles,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.name,class:"text-center odd:bg-gray-100 text-gray-500 font-bold"},[(0,a._)("td",c,[(0,a._)("p",null,(0,o.zw)(e.title),1)]),(0,a._)("td",p,[(0,a._)("p",null,(0,o.zw)(t.$timeFormat.formatTime(e.create_at)),1)]),(0,a._)("td",u,[e.isPublic?((0,a.wg)(),(0,a.iD)("p",h,m)):((0,a.wg)(),(0,a.iD)("p",x,f))]),(0,a._)("td",w,[(0,a._)("button",{type:"button",class:"bg-slate-300 font-bold rounded px-4 py-2 mx-2",onClick:t=>M.getArticle(e.id)}," 編輯 ",8,y),(0,a._)("button",{type:"button",class:"bg-red-700 text-white font-bold rounded px-4 py-2 mx-2",onClick:t=>M.openFormModal("delete",e)}," 刪除 ",8,_)])])))),128))])]),(0,a._)("p",v,"目前有 "+(0,o.zw)(b.articles.length)+" 篇文章",1)]),(0,a.Wm)(k,{active:b.isLoading},null,8,["active"]),(0,a.Wm)(A,{title:b.articlemodalTitle,onUpdateArticle:M.updateArticle,"temp-article":b.tempArticle,ref:"articleModal"},null,8,["title","onUpdateArticle","temp-article"]),(0,a.Wm)(L,{onDeleteItem:M.deleteArticle,item:b.tempArticle,ref:"deleteModal"},null,8,["onDeleteItem","item"])],64)}var k=l(5335),A=l(9242);const L={id:"defaultModal","aria-hidden":"true",class:"flex overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-50 justify-center items-center h-modal md:h-full md:inset-0 bg-white bg-opacity-60"},D={class:"flex justify-between items-start px-8 py-4 rounded-t border-b border-gray-600"},F={class:"text-lg font-semibold lg:text-2xl text-white"},C=(0,a._)("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),$=[C],z={class:"p-6 flex"},I={class:"flex flex-wrap w-full"},U={class:"w-full flex items-start flex-col mb-2 px-2"},V=(0,a._)("label",{for:"title",class:"text-white"},"標題",-1),j={class:"w-full flex items-start flex-col mb-3 px-2"},T=(0,a._)("label",{for:"content",class:"text-white"},"內容",-1),W={class:"w-full flex items-start flex-col mb-3 px-2"},Z={class:"flex my-4"},q={class:"mr-2"},N=["onClick"],P=(0,a._)("label",{for:"tags",class:"text-white"},"標籤",-1),H={class:"flex w-full"},S={class:"w-full flex items-start flex-col mb-3 px-2"},Y=(0,a._)("label",{for:"author",class:"text-white"},"作者",-1),B={class:"w-full flex items-start flex-col mb-3 px-2"},K=(0,a._)("label",{for:"create_at",class:"text-white"},"建立時間",-1),Q={class:"w-full flex items-center mb-3 px-2"},R=(0,a._)("label",{class:"text-white mr-4"},"是否啟用",-1),E={class:"flex-row items-start"},G={for:"is_enabled",class:"flex items-center"},J={class:"relative"},O=(0,a._)("div",{class:"block bg-white w-14 h-8 rounded-full border"},null,-1),X=(0,a._)("div",{class:"dot absolute left-1 top-1 bg-gray-200 w-6 h-6 rounded-full transition"},null,-1),tt={class:"flex justify-end items-center p-6 space-x-2 rounded-b border-t border-gray-600"},et=(0,a._)("button",{"data-modal-toggle":"defaultModal",type:"submit",class:"font-bold text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 rounded-lg text-base px-8 py-2.5 text-center"},"送出",-1);function lt(t,e,l,s,i,r){const d=(0,a.up)("b-icon-x-lg"),n=(0,a.up)("VLoading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",L,[(0,a._)("form",{class:"relative w-2/3 rounded-lg shadow bg-brown-dark",onSubmit:e[9]||(e[9]=(0,A.iM)((e=>t.$emit("updateArticle",i.temp)),["prevent"]))},[(0,a._)("div",D,[(0,a._)("h3",F,(0,o.zw)(l.title),1),(0,a._)("button",{type:"button",onClick:e[0]||(e[0]=t=>i.showFormModal=!1),class:"text-gray-400 bg-transparentrounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-600 hover:text-white","data-modal-toggle":"defaultModal"},$)]),(0,a._)("div",z,[(0,a._)("div",I,[(0,a._)("div",U,[V,(0,a.wy)((0,a._)("input",{ype:"text",class:"rounded px-2 py-2 w-full",id:"title","onUpdate:modelValue":e[1]||(e[1]=t=>i.temp.title=t),required:""},null,512),[[A.nr,i.temp.title]])]),(0,a._)("div",j,[T,(0,a.wy)((0,a._)("textarea",{class:"rounded px-2 py-2 w-full",id:"content",rows:"8","onUpdate:modelValue":e[2]||(e[2]=t=>i.temp.content=t),required:""},null,512),[[A.nr,i.temp.content]])]),(0,a._)("div",W,[(0,a._)("div",Z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.temp.tag,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"bg-brown-light font-bold text-white rounded-md px-4 py-2 mr-2 flex items-center"},[(0,a._)("p",q,(0,o.zw)(t),1),(0,a._)("button",{type:"button",onClick:t=>r.tagRemove(e)},[(0,a.Wm)(d)],8,N)])))),128))]),P,(0,a._)("div",H,[(0,a.wy)((0,a._)("input",{placeholder:"請輸入標籤",class:"rounded px-2 py-2 w-5/12 mr-4",type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>i.tagInput=t)},null,512),[[A.nr,i.tagInput]]),(0,a.wy)((0,a._)("button",{type:"button",class:"w-40 font-bold text-white bg-brown-light rounded-lg text-base focus:ring-2 focus:ring-brown-lighter px-8 py-2.5 text-center",onClick:e[4]||(e[4]=t=>r.tagSubmit())},"新增標籤",512),[[A.F8,""!=i.tagInput]])])]),(0,a._)("div",S,[Y,(0,a.wy)((0,a._)("input",{type:"text",class:"rounded px-2 py-2 w-full",id:"author","onUpdate:modelValue":e[5]||(e[5]=t=>i.temp.author=t),required:""},null,512),[[A.nr,i.temp.author]])]),(0,a._)("div",B,[K,(0,a.wy)((0,a._)("input",{type:"date",class:"rounded px-2 py-2 w-full",id:"create_at","onUpdate:modelValue":e[6]||(e[6]=t=>i.temp.create_at=t),required:""},null,512),[[A.nr,i.temp.create_at]])]),(0,a._)("div",Q,[R,(0,a._)("div",E,[(0,a._)("label",G,[(0,a._)("div",J,[(0,a.wy)((0,a._)("input",{type:"checkbox",id:"is_enabled",class:"sr-only","true-value":!0,"false-value":!1,"onUpdate:modelValue":e[7]||(e[7]=t=>i.temp.isPublic=t)},null,512),[[A.e8,i.temp.isPublic]]),O,X])])])])])]),(0,a._)("div",tt,[(0,a._)("button",{"data-modal-toggle":"defaultModal",type:"button",onClick:e[8]||(e[8]=t=>i.showFormModal=!1),class:"font-bold bg-gray-500 text-white focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-base px-8 py-2.5 focus:z-10 hover:bg-gray-600"},"取消"),et])],32),(0,a.Wm)(n,{active:i.isLoading},null,8,["active"])],512)),[[A.F8,i.showFormModal]])}var at={data(){return{temp:{tag:[]},showFormModal:!1,isLoading:!1,tagInput:""}},props:["tempArticle","title"],watch:{tempArticle(){this.temp={...this.tempArticle,tag:this.tempArticle.tag||[]},console.log(this.temp)}},methods:{tagSubmit(){this.temp.tag.push(this.tagInput),this.tagInput=""},tagRemove(t){this.temp.tag.splice(t,1)}}},ot=l(89);const st=(0,ot.Z)(at,[["render",lt]]);var it=st,rt=l(486),dt={data(){return{articles:[],pagination:[],tempArticle:{tag:[""]},isNew:!1,isLoading:!1,articlemodalTitle:""}},components:{QuestionModal:it,DeleteModal:rt.Z},methods:{getArticles(t=1){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/articles/?page=${t}`).then((t=>{this.articles=t.data.articles,this.pagination=t.data.pagination,this.isLoading=!1}))},updateArticle(t){this.isLoading=!0,t.create_at=(0,k._)(t.create_at),!1===this.isNew?this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/article/${t.id}`,{data:t}).then((t=>{console.log(t),this.getArticles(),this.closeFormModal(),this.isLoading=!1,alert(t.data.message)})).catch((t=>{alert(t.response.data.message)})):this.$http.post("https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/article",{data:t}).then((t=>{alert(t.data.message),this.getArticles(),this.closeFormModal(),this.isLoading=!1})).catch((t=>{alert(t.response.data.message)}))},deleteArticle(){this.isLoading=!0,this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/article/${this.tempArticle.id}`).then((t=>{alert(t.data.message),this.getArticles(),this.closeDeleteModal(),this.isLoading=!1})).catch((t=>{alert(t.response.data.message)}))},getArticle(t){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/article/${t}`).then((t=>{this.openFormModal("edit",t.data.article)}))},openFormModal(t,e){"edit"===t?(this.articlemodalTitle="修改問與答",this.tempArticle={...e,create_at:(0,k.m)(e.create_at)},console.log(this.tempArticle),this.isNew=!1,this.$refs.articleModal.showFormModal=!0,this.isLoading=!1):"new"===t?(this.articlemodalTitle="新增問與答",this.isNew=!0,this.tempArticle={isPublic:!1,create_at:(new Date).getTime()/1e3},this.$refs.articleModal.showFormModal=!0,this.isLoading=!1):(this.tempArticle={...e},this.$refs.deleteModal.showDeleteModal=!0)},closeFormModal(){this.$refs.articleModal.showFormModal=!1},closeDeleteModal(){this.$refs.deleteModal.showDeleteModal=!1}},mounted(){this.getArticles()}};const nt=(0,ot.Z)(dt,[["render",M]]);var ct=nt}}]);
//# sourceMappingURL=86.6ec03bd8.js.map